function InitTTSConfig(){var t=!1,n,i;return window.speechSynthesis?!0:(n=new XMLHttpRequest,n.open("get","/free_Web/TTSConfig.json",!1),n.send(null),n.status==200&&(i=JSON.parse(n.responseText),t=i.EnableTTS),t)}document.write('<script src="/free_Web/pinyin.js" type="text/javascript"><\/script>');document.write('<script src="/free_Web/free_Web_page.js?i=4" type="text/javascript"><\/script>');document.write('<script src="/free_Web/free_Web_FPing.js?i=4" type="text/javascript"><\/script>');document.write('<script src="/free_Web/free_Web_ReadArea.js?i=4" type="text/javascript"><\/script>');document.write('<script src="/free_Web/browserRead.js?i=6" type="text/javascript"><\/script>');document.write('<script src="/free_Web/browserKeys.js" type="text/javascript"><\/script>');jQuery.fn.extend({removeCss:function(n){return this.each(function(){var t=$(this);return jQuery.grep(n.split(","),function(n){t.css(n,"")}),t})}});var free_Web={};free_Web.IsInsideLabel=!1;free_Web.tool_Box={};free_Web.tool_Box_sub={};free_Web.Function={};free_Web.enableTTS=InitTTSConfig();window.speechSynthesis&&(free_Web.SpeechSynthesisTool={},free_Web.SpeechSynthesisTool.speechSynthesis=window.speechSynthesis,free_Web.SpeechSynthesisTool.rate=1,free_Web.SpeechSynthesisTool.volume=1,free_Web.SpeechSynthesisTool.muteVolume=1,free_Web.SpeechSynthesisTool.speaking=!1,free_Web.SpeechSynthesisTool.readFirst=!1);free_Web.Function.invokeFunction=function(n){if($.isFunction(n))return n.apply(null,Array.prototype.slice.call(arguments,1))};free_Web.Function.help={id:"Br_help",fun:"/free_Web/help.htm",title:"无障碍浏览使用帮助",minTitle:"帮助",img:"Br_help.png",mp3:"Br_help.mp3",toolhtml:function(){return s="<ul>",s+="<li><a id='"+this.id+"' href='"+this.fun+"' title='"+this.title+"' target='_blank'><img src='/free_Web/images/"+this.img+"'><\/a><p>"+this.minTitle+"<\/p><\/li>",s+="<\/ul>",$(s)}};free_Web.Function.show={Config:{id:"Br_close",img:"close.png",title:"开启无障碍浏览",minTitle:"关闭",closetitle:"关闭无障碍浏览",fun:"javascript:free_Web.Function.show.Start();",key:"Ctrl+Alt+B",keycode:79},toolhtml:function(){return s="<ul>",s+="<li><a id='"+this.Config.id+"' href='"+this.Config.fun+"' title='"+this.Config.closetitle+"（"+this.Config.key+"）'><img src='/free_Web/images/"+this.Config.img+"'><\/a><p>"+this.Config.minTitle+"<\/p><\/li>",s+="<\/ul>",$(s)},cookieName:"free_Web_status",clear:function(){free_Web.cookie.setCookie(this.cookieName,0);free_Web.Function.installBox.remove();this.status=!1},cookieMethod:function(){free_Web.cookie.getCookie(this.cookieName)==1&&(free_Web.Function.installBox.Isinstall(!0),this.status=!0,free_Web.Function.Read.Start())},status:!1,IsIsinstall:!1,Start:function(){this.status?(free_Web.Function.installBox.remove(),this.status=!1,free_Web.cookie.setCookie(this.cookieName,0),$("#Browser_head").html("无障碍浏览"),free_Web.Function.audioplay.play("您已关闭无障碍浏览功能"),free_Web.Function.clear()):(free_Web.cookie.setCookie(this.cookieName,1),this.IsIsinstall?free_Web.Function.audioplay.audio("您已开启无障碍浏览功能"):free_Web.Function.installBox.Isinstall(),this.status=!0,$("#Browser_head").html("关闭无障碍浏览"));free_Web.Function.Read.Start()}};free_Web.Function.installBox={box:"free_Web_box",Isinstall:function(n){var i,t;free_Web.Function.show.status||(i=$(document.body).children(":first"),free_Web.tool_Box_sub=$("<div id='"+this.box+"_sub'><\/div>").insertBefore(i),free_Web.tool_Box=$("<div id='"+this.box+"'><\/div>").appendTo(document.body),t=$("<div class='free_Web_tool'><div>").appendTo(free_Web.tool_Box),free_Web.Function.audioplay.load(n),$("<ul><li><a id='Br_BarTitle'><img src='/free_Web/images/Br_BarTitle.png' /><\/a><\/li><\/ul>").appendTo(t),free_Web.Function.pageZoom.toolhtml().appendTo(t),free_Web.Function.FontZoom.toolhtml().appendTo(t),free_Web.Function.textMode.toolhtml().appendTo(t),free_Web.Function.Br_ChangBg.toolhtml().appendTo(t),free_Web.Function.guides.toolhtml().appendTo(t),free_Web.Function.Fping.toolhtml().appendTo(t),free_Web.Function.Read.toolhtml().appendTo(t),free_Web.Function.ReadArea.toolhtml().appendTo(t),free_Web.Function.show.toolhtml().appendTo(t),free_Web.Function.help.toolhtml().appendTo(t),free_Web.tool_Box_sub.slideDown(500),free_Web.tool_Box.slideDown(500),this.IsIsinstall=!0)},remove:function(){free_Web.Function.show.status&&(free_Web.tool_Box_sub.slideUp(500),free_Web.tool_Box.slideUp(500),free_Web.tool_Box_sub.remove(),free_Web.tool_Box.remove())}};free_Web.Function.InsideLabel={init:function(){for(var t=document.getElementsByTagName("body")[0],n=0;n<t.childNodes.length;n++)try{this.nodeText(t.childNodes[n])}catch(i){}try{$("voice.Shimen-Pointer-Label").each(function(){$(this).get(0).outerHTML=$(this).get(0).outerHTML.replace(/([^，；。>]+)([，；。])([^，；。<]+)/gim,"$1<\/voice>$2<voice class='Shimen-Pointer-Label'>$3")})}catch(i){}free_Web.IsInsideLabel=!0},nodeText:function(n){var t,i;if(n.id!="browser_audiobox"&&n.id!="free_Web_box"&&n.nodeName.toLowerCase()!="script"&&n.nodeName.toLowerCase()!="style"&&!((" "+n.className+" ").indexOf(" videoPlayer ")>-1))for(t=0;t<n.childNodes.length;t++)try{n.childNodes[t].hasChildNodes()&&this.nodeText(n.childNodes[t]);n.childNodes[t].nodeType!=3||/^\s+$/.test(n.childNodes[t].nodeValue)||(i=document.createElement("voice"),i.className="Shimen-Pointer-Label",i.innerHTML=n.childNodes[t].nodeValue,n.replaceChild(i,n.childNodes[t]));n.childNodes[t].nodeType==1&&n.childNodes[t].nodeName==="IMG"&&(n.childNodes[t].alt!=""||n.childNodes[t].parentElement.nodeName=="A"||n.childNodes[t].title!="")&&$(n.childNodes[t]).addClass("IMG-Shimen-Pointer-Label");n.childNodes[t].nodeType==1&&n.childNodes[t].nodeName==="VIDEO"&&$(n.childNodes[t]).addClass("VIDEO-Shimen-Pointer-Label");n.childNodes[t].nodeType==1&&n.childNodes[t].nodeName==="AUDIO"&&$(n.childNodes[t]).addClass("AUDIO-Shimen-Pointer-Label");n.childNodes[t].nodeType==1&&n.childNodes[t].nodeName==="INPUT"&&$(n.childNodes[t]).addClass("INPUT-Shimen-Pointer-Label");n.childNodes[t].nodeType==1&&n.childNodes[t].nodeName==="SELECT"&&$(n.childNodes[t]).addClass("SELECT-Shimen-Pointer-Label")}catch(r){}},claer:function(){}};free_Web.Function.clear=function(){free_Web.Function.show.clear();free_Web.Function.pageZoom.clear();free_Web.Function.FontZoom.clear();free_Web.Function.Br_ChangBg.clear();free_Web.Function.Fping.clear();free_Web.Function.Read.clear();free_Web.Function.ReadArea.clear();free_Web.Function.ReadCon.clear();free_Web.Function.guides.clear();free_Web.Function.audioplay.beforeNewPlayer();free_Web.Function.textMode.status&&window.location.reload()};free_Web.Function.audioplay={speed:1,VolumeNum:100,audioBox:null,IsMute:!1,isSectionPlayed:!0,turl:"https://tts.powereasy.net/ServicesManagement/home/index",playingUrl:"",continueLongText:void 0,load:function(n){if(free_Web.SpeechSynthesisTool)free_Web.Function.audioplay.audio("您已开启无障碍浏览功能");else{soundManager.useFastPolling=!0;soundManager.onready(function(t){if(t.success)n||free_Web.Function.audioplay.audio("您已开启无障碍浏览功能");else return!1})}},stopAll:function(){free_Web.SpeechSynthesisTool?free_Web.SpeechSynthesisTool.speechSynthesis.cancel():(soundManager.stopAll(),this.isSectionPlayed=!0)},pauseAll:function(){free_Web.SpeechSynthesisTool?free_Web.SpeechSynthesisTool.speechSynthesis.pause():soundManager.pauseAll()},resumeAll:function(){free_Web.SpeechSynthesisTool.speechSynthesis?free_Web.SpeechSynthesisTool.speechSynthesis.resume():soundManager.resumeAll()},audio:function(n,t,i,r){var f,e,u;if(!free_Web.enableTTS)return!1;free_Web.SpeechSynthesisTool?(free_Web.SpeechSynthesisTool.speaking=free_Web.SpeechSynthesisTool.speechSynthesis.speaking,free_Web.SpeechSynthesisTool.speechSynthesis.cancel(),n&&n!=""&&(!r||r.length<=0)?(free_Web.SpeechSynthesisTool.InitContentPlay(),f=free_Web.SpeechSynthesisTool.CreateUtterance(n,t),free_Web.SpeechSynthesisTool.speechSynthesis.speak(f),free_Web.SpeechSynthesisTool.speechSynthesis.resume()):$.each(r,function(n,i){var r=free_Web.SpeechSynthesisTool.CreateUtterance(i,t);free_Web.SpeechSynthesisTool.speechSynthesis.speak(r);free_Web.SpeechSynthesisTool.speechSynthesis.resume()})):(this.stopAll(),e=window.location.href,u=this.turl+"?text="+encodeURI(n)+"&speed="+this.speed+"&sourceUrl="+e,this.play(u,t,i,r,this.turl,this.speed),this.playingUrl=u)},play:function(n,t,i,r,u,f){if(!free_Web.enableTTS)return!1;if(free_Web.SpeechSynthesisTool&&r&&r.length>0)free_Web.SpeechSynthesisTool.speechSynthesis.cancel(),$.each(r,function(n,t){var i=new SpeechSynthesisUtterance(t);i.rate=free_Web.SpeechSynthesisTool.rate;i.volume=free_Web.SpeechSynthesisTool.volume;free_Web.SpeechSynthesisTool.speechSynthesis.speak(i);free_Web.SpeechSynthesisTool.speechSynthesis.resume()});else{this.stopAll();var o="Shimen_gov_vioce"+this.r(),e=this;this.audioBox=soundManager.createSound({id:o,url:n,autoLoad:!0,autoPlay:!1,onload:function(){e.playingUrl===n&&this.play()},onfinish:function(){this.destruct();e.isSectionPlayed=!0;free_Web.Function.invokeFunction(t);free_Web.Function.invokeFunction(e.continueLongText)},onplay:function(){r!=undefined&&i!=undefined&&i<r.length-1&&setTimeout(function(){$.ajax({type:"get",url:u+"?text="+r[i+1]+"&speed="+f+"&isLoad=true&sourceUrl="+window.location.href,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0})},1e3)},volume:this.VolumeNum})}},playLongText:function(n,t,i){function b(){e++;t(e,h);e>=h&&free_Web.Function.invokeFunction(i)}function d(){s.isSectionPlayed=!1;e>=h?s.continueLongText=void 0:s.audio(f[e],b,e,f)}var r,l,h;if(!free_Web.enableTTS)return!1;if(n=n.trim(),n=n.replace(new RegExp("&nbsp;","gm"),""),n=n.replace(/\s*/g,""),this.stopAll(),!n)return setTimeout(function(){free_Web.Function.invokeFunction(i)},100),0;if(n.length<=100)return this.audio(n,i),1;var f=[],e=0,c=1,o=0,s=this;for(f[0]="开始朗读文章内容";;){if(r=n.substring(o,o+101),o>=n.length-1)break;if(r[r.length-1]=="，"||r[r.length-1]=="。"||r[r.length-1]=="；"||r[r.length-1]=="!"||r[r.length-1]=="？"||r[r.length-1]=="、")f[c]=r,c++,o+=r.length;else{var k=r.lastIndexOf("，"),a=r.lastIndexOf("。"),v=r.lastIndexOf("；"),y=r.lastIndexOf("！"),p=r.lastIndexOf("？"),w=r.lastIndexOf("、"),u=k;u<a&&(u=a);u<v&&(u=v);u<y&&(u=y);u<p&&(u=p);u<w&&(u=w);l=r.length-1-u;u==-1&&(l=0,u=r.length);f[c]=r.substring(0,u+1);c++;o+=r.length-l}}return h=f.length,s.continueLongText=d,s.audio(f[e],b,e,f),h},audioCon:function(n){var i,r,t;free_Web.SpeechSynthesisTool?(free_Web.SpeechSynthesisTool.speaking=free_Web.SpeechSynthesisTool.speechSynthesis.speaking,free_Web.SpeechSynthesisTool.InitContentPlay(),free_Web.SpeechSynthesisTool.speechSynthesis.cancel(),n&&n!=""&&(i=free_Web.SpeechSynthesisTool.CreateUtterance(n),free_Web.SpeechSynthesisTool.speechSynthesis.speak(i),free_Web.SpeechSynthesisTool.speechSynthesis.resume())):(this.stopAll(),r=window.location.href,t=this.turl+"?text="+encodeURI(n)+"&speed="+this.speed+"&sourceUrl="+r,this.playCon(t),this.playingUrl=t)},playCon:function(n){if(!free_Web.enableTTS)return!1;this.stopAll();var t="Shimen_gov_vioce"+this.r(),i=this;this.audioBox=soundManager.createSound({id:t,url:n,autoLoad:!0,autoPlay:!1,onload:function(){i.playingUrl===n&&this.play()},onfinish:function(){this.destruct();free_Web.Function.ReadCon.ReadNext()},volume:this.VolumeNum});free_Web.Function.audioplay.IsMute?this.audioBox.mute():this.audioBox.unmute()},Mute:function(){free_Web.Function.audioplay.IsMute=!0;free_Web.SpeechSynthesisTool?(free_Web.SpeechSynthesisTool.muteVolume=free_Web.SpeechSynthesisTool.volume,free_Web.SpeechSynthesisTool.volume=0,free_Web.Function.audioplay.VolumeNum=0,free_Web.Function.Read.show()):this.audioBox.mute()},UnMute:function(){free_Web.Function.audioplay.IsMute=!1;free_Web.SpeechSynthesisTool?(free_Web.SpeechSynthesisTool.volume=free_Web.SpeechSynthesisTool.muteVolume,free_Web.Function.audioplay.VolumeNum=free_Web.SpeechSynthesisTool.volume*100,free_Web.Function.Read.show()):this.audioBox.unmute()},Volume:function(n){this.VolumeNum=n;this.audioBox.setVolume(this.VolumeNum)},r:function(){return Math.round(2147483647*(Math.random()||.5))*+new Date%1e10},beforeNewPlayer:function(){$(".power-content_voice .power-content_voice-start").removeClass("disabled");$(".power-content_voice .power-content_voice-stop").addClass("disabled");$(".power-content_voice progress").attr("value",0);free_Web.Function.audioplay.continueLongText=void 0;free_Web.Function.ReadCon.clear();free_Web.Function.Read.clear()}};free_Web.cookie={};free_Web.cookie.setCookie=function(n,t){n!=undefined&&t!=undefined&&(document.cookie=n+"="+escape(t)+";")};free_Web.cookie.getCookie=function(n){if(n!=undefined){var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return t!=null?unescape(t[2]):null}};free_Web.SpeechSynthesisTool&&(free_Web.SpeechSynthesisTool.CreateUtterance=function(n,t){var i=new SpeechSynthesisUtterance(n);return i.rate=free_Web.SpeechSynthesisTool.rate,i.volume=free_Web.SpeechSynthesisTool.volume,i.onend=function(){free_Web.Function.ReadCon.status&&!free_Web.SpeechSynthesisTool.speaking&&free_Web.SpeechSynthesisTool.readFirst&&free_Web.Function.ReadCon.ReadNext();free_Web.SpeechSynthesisTool.speaking&&(free_Web.SpeechSynthesisTool.speaking=!1);t&&free_Web.Function.invokeFunction(t)},i},free_Web.SpeechSynthesisTool.InitContentPlay=function(){$(".power-content_voice-start").removeClass("disabled");$(".power-content_voice-pause").addClass("disabled");$(".power-content_voice-stop").addClass("disabled");$(".power-content_voice-stop progress").attr("value",0);$(".power-content_voice-stop progress").find("ie").width("0%");$(".power-content_voice-pause").hide();$(".power-content_voice-start").show()});$(document).ready(function(){$(document).click(function(n){free_Web.Function.Br_ChangBg.ISItemsShow&&n.target.getAttribute("dir")!=free_Web.Function.Br_ChangBg.Config.menuBoxid&&free_Web.Function.Br_ChangBg.up();free_Web.Function.guides.ISItemsShow&&n.target.getAttribute("dir")!=free_Web.Function.guides.Config.tools[1].dir&&free_Web.Function.guides.up();free_Web.Function.Fping.ISItemsShow&&n.target.getAttribute("dir")!=free_Web.Function.Fping.Config.tools[1].dir&&free_Web.Function.Fping.up();free_Web.Function.VoiceSet.ISItemsShow&&n.target.getAttribute("dir")!=free_Web.Function.Read.Config.tools[3].dir&&free_Web.Function.VoiceSet.up()});free_Web.Function.show.cookieMethod();free_Web.SpeechSynthesisTool||(soundManager.debugMode=!1,soundManager.url="/free_Web/swf/")}),function(){function n(){var n=!1;$("[data-power-accessible-reading]").each(function(){function o(n,t){r.attr("value",n);r.find("ie").width(Math.round(n*100/t)+"%")}function s(){free_Web.Function.audioplay.beforeNewPlayer();t.addClass("disabled");u.removeClass("disabled");i.removeClass("disabled");t.hide();i.show()}function e(){n=!1;t.removeClass("disabled");i.addClass("disabled");u.addClass("disabled");r.attr("value",0);r.find("ie").width("0%");i.hide();t.show()}function h(){n=!0;t.removeClass("disabled");i.addClass("disabled");u.removeClass("disabled");i.hide();t.show()}function c(){n=!1;t.addClass("disabled");u.removeClass("disabled");i.removeClass("disabled");t.hide();i.show()}var f=$(this),t=$($.parseHTML('<a href="javascript:;" class="voice-button power-content_voice-start"><button><\/button><\/a>')),i=$($.parseHTML('<a href="javascript:;" class="voice-button power-content_voice-pause disabled" style="display:none;"><button><\/button><\/a>')),u=$($.parseHTML('<a href="javascript:;" class="voice-button power-content_voice-stop disabled"><button><\/button><\/a>')),r=$('<progress value="0" max="100" ><ie style="width:0%;"><\/ie><\/progress>');f.before($('<div class="power-content_voice" data-power-notprint><\/div>').append(t).append(i).append(u).append(r));free_Web.enableTTS||$(".power-content_voice").addClass("hide_tts");$(".power-content_voice").on("click",'a[class="voice-button power-content_voice-start"]:not(.disabled)',function(){var h,i,u,t,l;if(n){c();free_Web.Function.audioplay.resumeAll();return}return s(),free_Web.IsInsideLabel||free_Web.Function.InsideLabel.init(),h=/<\/?.+?\/?>/g,i=f.html(),i=i.replace(new RegExp("<\/br>","gm"),"。"),i=i.replace(new RegExp("<br>","gm"),"。"),i="<div>"+i+"<\/div>",u=$(i).find("p"),t="",u.length>0?$.each(u,function(n,i){var r=i.innerHTML;r=r.replace("\n","");r=r.trim();t+=r+"。"}):t=i,t=t.replace(h,""),t=t.replace(new RegExp("。。。","gm"),"。"),t=t.replace(new RegExp("。。","gm"),"。"),l=free_Web.Function.audioplay.playLongText(t,o,e),r.attr("max",l),!1}).on("click",'a[class="voice-button power-content_voice-stop"]:not(.disabled)',function(){return e(),free_Web.Function.audioplay.stopAll(),!1}).on("click",'a[class="voice-button power-content_voice-pause"]:not(.disabled)',function(){return h(),free_Web.Function.audioplay.pauseAll(),!1})})}$(function(){n()})}();